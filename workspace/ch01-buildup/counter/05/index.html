<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Counter - 05 createRoot(), render() 함수 만들기</title>
  </head>
  <body>
    <!-- <div id="app">
      <header>
        <h1>Counter - 03 createElement() 함수 만들기</h1>
        <p>파일 경로: <span id="filepath"></span></p>
      </header>
      <div id="counter">
        <button type="button" onclick="handleDown()">-</button>
        <button type="button" onclick="handleReset(event)">0</button>
        <button type="button" onclick="handleUp()">+</button>
        <span>0</span>
      </div>
    </div> -->

    <div id="root"></div>
    <script type="module">
      import Reaction from "./reaction.js";

    // 기존 const App으로 변수 형태로 만드는 것 보다 함수로 만드는 게 활용하기 더 좋아서 변경
    function App(){
      return (
      Reaction.createElement('div', { id: 'app' }, 
        Reaction.createElement('header', null, 
          Reaction.createElement('h1', null, 'Counter - 05 createRoot(), render() 함수 만들기'), 
          Reaction.createElement('p', null, '파일 경로: ', 
            Reaction.createElement('span', { id: 'filepath' }, `ch${ document.URL.split("/ch")[1] }index.html`))), 
        Reaction.createElement('div', { id: 'counter' }, 
          Reaction.createElement('button', { type: 'button', onclick: handleDown }, '-'), // event 전달할 때 화살표 함수에 감싸야지 handleDown(event) 이렇게 적으면 안 됨!
          Reaction.createElement('button', { type: 'button', onclick: (event) => handleReset(event) }, 0), 
          Reaction.createElement('button', { type: 'button', onclick: handleUp }, '+'), 
          Reaction.createElement('span', null, 0)))
      );
    }
    /* counter 구성 */
   
      // root 요소에 app 추가
      // document.querySelector('#root').appendChild(App);
      Reaction.createRoot(document.getElementById('root')).render(App);
    </script>

    <script>
      let count = 0;

      // 카운터 감소
      const handleDown = () => {
        // 데이터 갱신, count 값 감소
        count--;

        // 화면 갱신, count 값 화면에 표시
        document.querySelector("#counter > span").textContent = count;
      };

      // 카운터 증가
      const handleUp = () => {
        // 데이터 갱신, count 값 증가
        count++;
        // 화면 갱신, count 값 화면에 표시
        document.querySelector("#counter > span").textContent = count;
      };

      // 카운터 초기화
      const handleReset = (event) => {
        // 데이터 갱신, count 값 초기화
        count = 0;
        // 화면 갱신, count 값 화면에 표시
        document.querySelector("#counter > span").textContent = count;
      };
    </script>
  </body>
</html>
